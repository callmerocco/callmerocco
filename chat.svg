<svg
  width="400"
  height="720"
  viewBox="0 0 400 720"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
  role="img"
  aria-label="Animated iMessage chat switching from iMessage to SMS with status bar"
  style="background:#f0f0f5; border-radius:40px; box-shadow: 0 15px 30px rgba(0,0,0,0.2);"
>
  <style>
    /* General text */
    .status-text {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      font-size: 14px;
      fill: #222;
      font-weight: 600;
      user-select: none;
    }
    .time {
      font-weight: 700;
      font-size: 18px;
    }
    .battery-text {
      font-weight: 600;
      font-size: 12px;
      fill: #333;
    }

    /* Status icons styling */
    .wifi-bars {
      fill: none;
      stroke: #222;
      stroke-width: 2;
      stroke-linecap: round;
    }
    .signal-bars {
      fill: none;
      stroke: #222;
      stroke-width: 2;
      stroke-linejoin: round;
    }
    .battery-rect {
      fill: none;
      stroke: #222;
      stroke-width: 2;
      rx: 3;
      ry: 3;
    }
    .battery-level {
      fill: #4cd964; /* green battery */
      transition: fill 1s ease;
    }

    /* Message bubbles */
    .bubble-blue {
      fill: #007aff;
      rx: 18;
      ry: 18;
      filter: drop-shadow(0 4px 6px rgba(0, 122, 255, 0.4));
    }
    .bubble-green {
      fill: #34c759;
      rx: 18;
      ry: 18;
      filter: drop-shadow(0 4px 6px rgba(52, 199, 89, 0.4));
    }
    .bubble-text {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      font-size: 18px;
      fill: white;
      user-select: none;
    }

    /* Animations */
    .fade-in {
      animation: fadeIn 1s ease forwards;
    }
    .fade-out {
      animation: fadeOut 1s ease forwards;
    }
    .slide-up {
      animation: slideUp 1s ease forwards;
    }
    .slide-down {
      animation: slideDown 1s ease forwards;
    }
    .hidden {
      opacity: 0;
      pointer-events: none;
    }

    /* Keyframes */
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
    @keyframes fadeOut {
      from {
        opacity: 1;
      }
      to {
        opacity: 0;
      }
    }
    @keyframes slideUp {
      from {
        transform: translateY(40px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    @keyframes slideDown {
      from {
        transform: translateY(0);
        opacity: 1;
      }
      to {
        transform: translateY(40px);
        opacity: 0;
      }
    }
  </style>

  <!-- iPhone status bar background -->
  <rect width="400" height="50" fill="#fff" rx="40 40 0 0" />

  <!-- Time -->
  <text x="20" y="32" class="status-text time">9:41</text>

  <!-- WiFi icon -->
  <g transform="translate(150, 18)" aria-label="WiFi signal" role="img">
    <path
      class="wifi-bars"
      d="M0 12 C5 6 15 6 20 12"
      stroke-width="2.5"
      fill="none"
    />
    <path class="wifi-bars" d="M5 17 L15 17" stroke-width="2.5" />
    <circle cx="10" cy="17" r="2" fill="#222" />
  </g>

  <!-- LTE label -->
  <text
    id="lte-label"
    x="220"
    y="32"
    class="status-text"
    font-weight="700"
    aria-live="polite"
  >
    LTE
  </text>

  <!-- Signal bars -->
  <g transform="translate(270, 12)" aria-label="Cellular signal" role="img">
    <rect x="0" y="8" width="5" height="12" class="signal-bars" />
    <rect x="7" y="5" width="5" height="15" class="signal-bars" />
    <rect x="14" y="2" width="5" height="18" class="signal-bars" />
    <rect x="21" y="0" width="5" height="20" class="signal-bars" />
  </g>

  <!-- Battery -->
  <g transform="translate(340, 12)" aria-label="Battery" role="img">
    <rect x="0" y="6" width="35" height="18" class="battery-rect" />
    <rect x="36" y="11" width="4" height="8" rx="1" ry="1" fill="#222" />
    <rect
      id="battery-level"
      x="4"
      y="8"
      width="27"
      height="14"
      class="battery-level"
    />
  </g>

  <!-- Chat area background -->
  <rect
    x="0"
    y="50"
    width="400"
    height="670"
    fill="#f2f2f7"
    rx="0 0 40 40"
  />

  <!-- Blue iMessage bubble -->
  <g id="imessage-bubble" transform="translate(30, 120)">
    <rect class="bubble-blue" width="320" height="70" />
    <text
      class="bubble-text"
      x="20"
      y="44"
      aria-label="iMessage text from Rocco"
      >Hey! This is iMessage ðŸ’™</text
    >
  </g>

  <!-- Green SMS bubble (initially hidden) -->
  <g
    id="sms-bubble"
    transform="translate(30, 220)"
    class="hidden"
    aria-label="SMS text from Rocco"
  >
    <rect class="bubble-green" width="320" height="70" />
    <text class="bubble-text" x="20" y="44">Hey! This is SMS ðŸŸ¢</text>
  </g>

  <script type="application/ecmascript"><![CDATA[
    const svg = document.currentScript.ownerDocument;
    const lteLabel = svg.getElementById("lte-label");
    const imessage = svg.getElementById("imessage-bubble");
    const sms = svg.getElementById("sms-bubble");
    const batteryLevel = svg.getElementById("battery-level");

    // Sequence timings (ms)
    const delayLTEOff = 3500;
    const delaySwitchToSMS = 4000;

    function animateLTEOff() {
      // Animate LTE label fade out
      let opacity = 1;
      const fadeOut = setInterval(() => {
        opacity -= 0.05;
        if (opacity <= 0) {
          opacity = 0;
          clearInterval(fadeOut);
          lteLabel.textContent = "";
        }
        lteLabel.style.opacity = opacity;
      }, 50);
    }

    function switchToSMS() {
      // Hide iMessage bubble and show SMS bubble
      imessage.classList.add("hidden");
      sms.classList.remove("hidden");

      // Change battery level to red to show low battery (just for effect)
      batteryLevel.setAttribute("fill", "#ff3b30");
    }

    setTimeout(() => {
      animateLTEOff();
    }, delayLTEOff);

    setTimeout(() => {
      switchToSMS();
    }, delaySwitchToSMS);
  ]]></script>
</svg>
